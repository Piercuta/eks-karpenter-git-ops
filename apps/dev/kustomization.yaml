apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../base/fastapi
  - ../base/file-service

patches:
  - path: patches/fastapi/patch-hpa-cdk.yaml
    target:
      kind: HorizontalPodAutoscaler
      name: fastapi-hpa
      namespace: fastapi
  - path: patches/fastapi/patch-hpa.yaml
    target:
      kind: HorizontalPodAutoscaler
      name: fastapi-hpa
      namespace: fastapi
  - path: patches/fastapi/patch-cm-cdk.yaml
    target:
      kind: ConfigMap
      name: fastapi-config
      namespace: fastapi
  - path: patches/fastapi/patch-deployment-cdk.yaml
    target:
      kind: Deployment
      name: fastapi-app
      namespace: fastapi
  - path: patches/fastapi/patch-sg-cdk.yaml
    target:
      kind: SecurityGroupPolicy
      name: fastapi-sg
      namespace: fastapi
  - path: patches/file-service/patch-cm-cdk.yaml
    target:
      kind: ConfigMap
      name: file-service-config
      namespace: file-service
  - path: patches/file-service/patch-deployment-cdk.yaml
    target:
      kind: Deployment
      name: file-service-app
      namespace: file-service